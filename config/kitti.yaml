# Data paths
data_directory: "/home/eugene/data/KITTI/Velodyne"
ground_truth_directory: "/home/eugene/data/KITTI/GroundTruth"
output_directory: "/home/eugene/data/KITTI/Result"
seq: "07"

# Player settings
player:
  enable_viewer: true
  enable_statistics: true
  enable_console_statistics: true
  step_mode: false  # Step-by-step processing mode
  auto_ground_truth_path: true  # Automatically construct GT path from sequence


# Point cloud processing
point_cloud:
  voxel_size: 0.4
  max_range: 60.0
  min_range: 0.1

# Feature extraction
feature_extraction:
  min_plane_points: 5
  max_neighbors: 5
  max_plane_distance: 0.05
  collinearity_threshold: 0.05
  max_neighbor_distance: 0.5
  feature_quality_threshold: 0.1

# Odometry settings
odometry:
  max_iterations: 10
  convergence_threshold: 0.001
  max_correspondence_distance: 1.0  # KITTI is large scale environment
  
# Robust estimation settings
robust_estimation:
  use_adaptive_m_estimator: true
  loss_type: "cauchy"                 # "cauchy", "huber"
  scale_method: "MAD"                 # "MAD", "fixed", "PKO"
  fixed_scale_factor: 1.0
  mad_multiplier: 1.4826             # MAD to std conversion factor
  cauchy_multiplier: 2.3849          # Cauchy loss multiplier
  huber_multiplier: 1.345            # Huber loss multiplier
  min_scale_factor: 0.5              # PKO alpha lower bound
  max_scale_factor: 10.0                # PKO alpha upper bound
  
  # PKO (Probabilistic Kernel Optimization) parameters
  num_alpha_segments: 100
  truncated_threshold: 10.0         # 백업과 동일하게 10.0으로 수정
  gmm_components: 5
  gmm_sample_size: 100               # 10% of typical data size
  pko_kernel_type: "cauchy"    # 백업과 동일한 cauchy kernel 사용

# Estimator settings
estimator:
  keyframe_distance_threshold: 2.0  # Larger distance for KITTI
  keyframe_rotation_threshold: 0.3   # ~17 degrees
  min_correspondence_points: 50      # More points needed for stability
  max_solver_iterations: 100         # More iterations for convergence
  parameter_tolerance: 1e-6          # More relaxed tolerance
  function_tolerance: 1e-6           # More relaxed tolerance
  max_map_frames: 10                 # Fewer frames for efficiency

# Viewer settings
viewer:
  viewer_width: 3000
  viewer_height: 2000
  point_size: 2.0
  feature_point_size: 5.0
  trajectory_width: 2.0
  coordinate_frame_size: 5    # Larger coordinate frame size
  coordinate_frame_width: 4   # Thicker coordinate frame lines
  auto_mode: false  # Step mode for debugging
  show_point_cloud: true   # Enable original point cloud
  show_features: true      # Enable features display
  show_trajectory: true
  show_coordinate_frame: true
  show_grid: true
  follow_camera: false
  top_view_follow: true  # Enable top-down view following

# Result output settings
output:
  save_trajectory: true
  trajectory_format: "kitti"  # "kitti" or "tum"
  print_final_errors: true    # Print translation and rotation errors at the end
  error_summary_format: "clean"  # "clean" or "detailed"



